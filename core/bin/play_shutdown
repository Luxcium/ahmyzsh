#!/usr/bin/env sh

# core/bin/play_shutdown

function play_shutdown_() {
  # #region play_shutdown_ =====================================================ยน
  (
    sleep 1.5
    play -qv 0.75 /home/luxcium/.local/share/sounds/smooth/stereo/desktop-login.oga &
    sleep "${2:-4}"

    if [ "${1:-''}" == "reboot" ]; then
      (
        (play -qv 0.4 /home/luxcium/.local/share/sounds/zelda/stereo/lowbatt.ogg &) # 0.6191s
        sleep 0.5
        (play -qv 0.5 /home/luxcium/.local/share/sounds/zelda/stereo/buddylogin.ogg chorus 0.4 0.9 50 0.5 0.25 2 -t 40 0.6 0.2 3 -s 60 0.6 0.3 1.3 -t &) # 1.4319s
        sleep 2
        (play -qv 0.9 /home/luxcium/.local/share/sounds/zelda/stereo/dialog-warning.ogg &) & # 0.7116s
        sleep 0.72
      ) &
      sleep 1.5
      sudo /sbin/shutdown -t 10 -rf now
      return
    fi

    if [ "${1:-''}" == "shutdown" ]; then
      (
        (play -qv 0.7 /home/luxcium/.local/share/sounds/zelda/stereo/dialog-warning.ogg) &
        sleep 0.62
        (play -qv 0.3 /home/luxcium/.local/share/sounds/zelda/stereo/email.ogg) &
        sleep 0.9
      ) &
      sleep 0.52

      sudo /sbin/shutdown -t 10 -hf now
      return
    fi

    (play -qv 0.5 /home/luxcium/.local/share/sounds/zelda/stereo/imsent.ogg)

    (play -qv 0.5 /home/luxcium/.local/share/sounds/zelda/stereo/imsent.ogg) &
    (play -qv 0.5 /home/luxcium/.local/share/sounds/zelda/stereo/dialog-error.ogg) &
    sleep 0.35
    (play -qv 0.5 /home/luxcium/.local/share/sounds/zelda/stereo/imsent.ogg)

    (play -qv 0.5 /home/luxcium/.local/share/sounds/zelda/stereo/imsent.ogg)

    (play -qv 0.5 /home/luxcium/.local/share/sounds/zelda/stereo/imsent.ogg)

    echo "${1} is not a valid option try play_shutdown <reboot|shutdown> [TIME (play duration in seconds default  is 4sec)]"
  )
  # //    play_zelda_imsent;play_zelda_imsent&play_zelda_dialog-error&sleep 0.3;play_zelda_imsent;play_zelda_imsent;play_zelda_imsent
  # #endregion play_shutdown_ ==================================================ยน
}

## Extra code make it easy to copy paste only the function out to use elsewhere
play_shutdown_ "${@}"

__EXIT_STATUS="${?}"

unset -f play_shutdown_

exit $__EXIT_STATUS

# (play -qv 0.3 /home/luxcium/.local/share/sounds/zelda/stereo/email.ogg) &
# (play -qv 0.5 /home/luxcium/.local/share/sounds/smooth/stereo/_desktop-login.oga) &
# (play -qv 0.5 /home/luxcium/.local/share/sounds/zelda/stereo/imsent.ogg) &
# (play -qv 0.3 /home/luxcium/.local/share/sounds/zelda/stereo/buddylogin.ogg) &
# (play -qv 0.5 /home/luxcium/.local/share/sounds/zelda/stereo/imsent.ogg) &
