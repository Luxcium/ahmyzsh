#!/bin/sh

# ddtotheend

{
  function ddsoft() {
    (
      sudo ionice -c 3 nice -n 35 dd if=/dev/zero of=/dev/null &
    )
  }

  function ddhard() {
    (
      sudo ionice -c 1 -n 0 nice -n -35 dd if=/dev/zero of=/dev/null &
    )
  }

  function ddsoft5() {
    (
      sleep 1
      ddsoft
      sleep 0.5
      ddsoft
      sleep 0.5
      ddsoft
      sleep 0.5
      ddsoft
      sleep 0.5
      ddsoft
    )
  }

  function ddhard5() {
    (
      sleep 1
      ddhard
      sleep 0.5
      ddhard
      sleep 0.5
      ddhard
      sleep 0.5
      ddhard
      sleep 0.5
      ddhard

    )
  }
}

echo -e '\e[38;2;252;198;36m\n   TEST #1' ## -----------------------------------

(
  echo 'Will test DDHARD x5 for 15 sec'
  echo 'Warm Up'
  (

    ddhard5 &

  )
  sleep 3
  echo 'full speed for 15 seconds'
  sleep 10
  # \u001b[1000D
  echo -en "\e[38;2;252;198;36m 5 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 4 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 3 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 2 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 1 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 0 sec remaining \u001b[1000D"
  sudo killall dd
  echo '---                                                                    '
)

echo -e '\n   TEST #2' ## ------------------------------------------------------

(
  echo 'Will test DD HARDnSOFT x20 for 20 sec'
  sleep 10
  echo 'Warm Up'
  (

    ddhard5 &
    ddsoft5 &

    ddhard5 &
    ddsoft5 &

  )
  sleep 3
  echo 'full speed for 20 seconds'
  sleep 15
  # \u001b[1000D
  echo -en "\e[38;2;252;198;36m 5 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 4 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 3 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 2 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 1 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 0 sec remaining \u001b[1000D"
  sudo killall dd
  echo '---                                                                    '
)

echo -e '\n   TEST #3' ## ------------------------------------------------------

(
  echo 'Will test DDHARD x20 for 20 sec'
  sleep 10
  echo 'Warm Up'
  (

    ddhard5 &
    ddhard5 &

    ddhard5 &
    ddhard5 &

  )
  sleep 3
  echo 'full speed for 20 seconds'
  sleep 15
  # \u001b[1000D
  echo -en "\e[38;2;252;198;36m 5 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 4 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 3 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 2 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 1 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 0 sec remaining \u001b[1000D"
  sudo killall dd
  echo '---                                                                    '
)

echo -e '\n   TEST #4 a' ## ----------------------------------------------------

(
  echo 'Will test DD HARDnSOFT x60 for 15 sec'
  sleep 10
  echo 'Warm Up'
  (

    ddhard5 &
    ddsoft5 &

    ddhard5 &
    ddsoft5 &

    ddhard5 &
    ddsoft5 &

    ddhard5 &
    ddsoft5 &

    ddhard5 &
    ddsoft5 &

    ddhard5 &
    ddsoft5 &

  )
  sleep 3
  echo 'full speed for 15 seconds'
  sleep 10
  # \u001b[1000D
  echo -en "\e[38;2;252;198;36m 5 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 4 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 3 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 2 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 1 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 0 sec remaining \u001b[1000D"
  sudo killall dd
  echo '---                                                                    '
)

echo -e '\n   TEST #4 b' ## ----------------------------------------------------

(
  echo 'Will test DDHARD x60 for 15 sec'
  sleep 10
  echo 'Warm Up'
  (

    ddhard5 &
    ddhard5 &

    ddhard5 &
    ddhard5 &

    ddhard5 &
    ddhard5 &

    ddhard5 &
    ddhard5 &

    ddhard5 &
    ddhard5 &

    ddhard5 &
    ddhard5 &

  )
  sleep 3
  echo 'full speed for 15 seconds'
  sleep 10
  # \u001b[1000D
  echo -en "\e[38;2;252;198;36m 5 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 4 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 3 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 2 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 1 sec remaining \u001b[1000D"
  sleep 1
  echo -en "\e[38;2;252;198;36m 0 sec remaining \u001b[1000D"
  sudo killall dd
  echo '---                                                                    '
)
echo ''
echo --------------------
echo 'completed !!!'
echo 'completed !!!'
echo 'completed !!!'
echo --------------------
exit 0
